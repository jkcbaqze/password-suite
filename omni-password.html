<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Omni Password Generator</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <nav>
    <a href="dashboard.html">Dashboard</a>
    <a href="username-generator.html">Username Generator</a>
    <a href="bindmark-generator.html">Bindmark</a>
  </nav>
  <div class="container">
    <h1>üîê Omni Password Generator</h1>

    <label for="length">Password Length:</label>
    <input type="number" id="length" min="4" max="64" value="16" />

    <div class="options">
      <label><input type="checkbox" id="useVowels" checked /> Include Vowels</label>
      <label><input type="checkbox" id="vowelCaps" /> Capitalize Vowels</label>
      <label><input type="checkbox" id="useConsonants" checked /> Include Consonants</label>
      <label><input type="checkbox" id="consonantCaps" /> Capitalize Consonants</label>
      <label><input type="checkbox" id="useNumbers" checked /> Include Numbers</label>
      <label><input type="checkbox" id="useSymbols" checked /> Include Symbols</label>
      <label><input type="checkbox" id="uniqueOnly" /> Use Unique Characters</label>
      <label><input type="checkbox" id="quickRandom" /> Just Random (Override All)</label>
    </div>

    <div class="boundaries">
      <label for="startChar">Start With:</label>
      <select id="startChar">
        <option value="any">Any</option>
        <option value="vowel">Vowel</option>
        <option value="consonant">Consonant</option>
        <option value="number">Number</option>
        <option value="symbol">Symbol</option>
      </select>
      <label><input type="checkbox" id="startCap" /> Capitalize Start</label>

      <label for="endChar">End With:</label>
      <select id="endChar">
        <option value="any">Any</option>
        <option value="vowel">Vowel</option>
        <option value="consonant">Consonant</option>
        <option value="number">Number</option>
        <option value="symbol">Symbol</option>
      </select>
      <label><input type="checkbox" id="endCap" /> Capitalize End</label>
    </div>

    <button onclick="generatePassword()">Generate Password</button>
    <div id="result" class="output"></div>
  </div>

  <script>
    const vowels = 'aeiou';
    const consonants = 'bcdfghjklmnpqrstvwxyz';
    const numbers = '0123456789';
    const symbols = '!@#$%^&*()_+-=[]{}|;:,.<>?';

    function getCharFromSet(set, caps, usedSet = new Set(), unique = false) {
      const candidates = set.split('').filter(c => !unique || !usedSet.has(c) && !usedSet.has(c.toUpperCase()));
      if (candidates.length === 0) return '';
      let c = candidates[Math.floor(Math.random() * candidates.length)];
      return caps ? c.toUpperCase() : c;
    }

    function generatePassword() {
      const len = parseInt(document.getElementById('length').value);
      const useVowels = document.getElementById('useVowels').checked;
      const vowelCaps = document.getElementById('vowelCaps').checked;
      const useConsonants = document.getElementById('useConsonants').checked;
      const consonantCaps = document.getElementById('consonantCaps').checked;
      const useNumbers = document.getElementById('useNumbers').checked;
      const useSymbols = document.getElementById('useSymbols').checked;
      const uniqueOnly = document.getElementById('uniqueOnly').checked;
      const quickRandom = document.getElementById('quickRandom').checked;

      const startChar = document.getElementById('startChar').value;
      const endChar = document.getElementById('endChar').value;
      const startCap = document.getElementById('startCap').checked;
      const endCap = document.getElementById('endCap').checked;

      let result = [];
      let used = new Set();
      let pool = '';

      if (quickRandom) {
        pool = vowels + consonants + numbers + symbols;
      } else {
        if (useVowels) pool += vowels;
        if (useConsonants) pool += consonants;
        if (useNumbers) pool += numbers;
        if (useSymbols) pool += symbols;
      }

      function getFromPool() {
        let poolArray = pool.split('').filter(c => !uniqueOnly || !used.has(c));
        if (poolArray.length === 0) return '';
        let c = poolArray[Math.floor(Math.random() * poolArray.length)];
        used.add(c);
        return c;
      }

      function getByType(type, caps, position = null) {
        let char = '';
        switch (type) {
          case 'vowel':
            char = getCharFromSet(vowels, caps, used, uniqueOnly);
            break;
          case 'consonant':
            char = getCharFromSet(consonants, caps, used, uniqueOnly);
            break;
          case 'number':
            char = getCharFromSet(numbers, false, used, uniqueOnly);
            break;
          case 'symbol':
            char = getCharFromSet(symbols, false, used, uniqueOnly);
            break;
          default:
            char = getFromPool();
        }
        if (uniqueOnly && char) used.add(char);
        return char;
      }

      if (len < 2) return alert('Password length must be at least 2');

      // Start
      result.push(getByType(startChar, startCap));

      // Middle
      for (let i = 1; i < len - 1; i++) {
        result.push(getFromPool());
      }

      // End
      result.push(getByType(endChar, endCap));

      document.getElementById('result').textContent = result.join('');
    }
  </script>
</body>
</html>
